name: Vercel deploy (with merge)

on:
  workflow_call:
    inputs:
      from:
        required: true
        type: string
      to:
        required: true
        type: string
    secrets:
      GITHUB_TOKEN:
        required: true

jobs:
  vercel_deploy_merge:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          ref: ${{ github.event.inputs.from }}
      - name: Merge to ${{ github.event.inputs.to }} branch 🔁
        uses: LasaleFamine/action-ff-merge@v1
        with:
          from: ${{ github.event.inputs.from }}
          to: ${{ github.event.inputs.to }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
